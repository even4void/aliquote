<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
<!-- 2019-02-17 Dim 11:52 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Stata : gestion des données</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Christophe Lalanne" />
<link rel="stylesheet" type="text/css" href="worg.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 90,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 90,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 90},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Stata : gestion des données</h1>
<div id="table-of-contents">
<h2>Table des matières</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd56b207">Gestion d&rsquo;un tableau de données</a>
<ul>
<li><a href="#orgc8bb919">Le format DTA</a></li>
<li><a href="#org56ce8c6">Propriétés d&rsquo;un tableau Stata</a></li>
<li><a href="#orgb82e975">Autres sources de données</a></li>
<li><a href="#org02c4e5f">Type de variables</a></li>
<li><a href="#orga979104">Variables et liste de variables</a></li>
</ul>
</li>
<li><a href="#org3dd4b63">Manipulation de variables</a>
<ul>
<li><a href="#org4d3948f">Syntaxe élémentaire des commandes Stata</a></li>
<li><a href="#orgf5390a9">Création et mise à jour de variables</a></li>
<li><a href="#org9acd380">Etiquette et annotation</a></li>
<li><a href="#orga0672a8">Changement de mode de stockage et format</a></li>
<li><a href="#org86f01df">Gestion des dates</a></li>
<li><a href="#org3618a81">Recodage de variables</a></li>
</ul>
</li>
<li><a href="#org2bafa6d">Transformation d&rsquo;un tableau</a>
<ul>
<li><a href="#orgaf2adfa">Sélection d&rsquo;observations et tri</a></li>
<li><a href="#org2e3226d">Optimisation de la taille mémoire</a></li>
<li><a href="#org9af1c37">Agrégation</a></li>
<li><a href="#org917b6ac">Fusion de sources de données</a></li>
<li><a href="#orgc94a65c">Mode de représentation rectangulaire</a></li>
</ul>
</li>
<li><a href="#orgbb59c07">Tableaux de description avancés</a>
<ul>
<li><a href="#org1540d41">Les commandes tabulate et summarize</a></li>
<li><a href="#orgcd05b19">La commande tabstat</a></li>
<li><a href="#orgba64505">La commande table</a></li>
<li><a href="#org2c2cd96">Analyses pondérées</a></li>
<li><a href="#orga258801">Commandes additionnelles</a></li>
<li><a href="#org9e98357">Exportation des tableaux</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Stata est reconnu pour faciliter la gestion et le recodage des données ainsi que l&rsquo;automatisation de tâches répétitives. Ce chapitre a pour but de discuter les commandes essentielles permettant de manipuler des variables contenues dans un tableau de données. Une caractéristique de Stata est que le concept de variable est à prendre au sens statistique du terme, et non au sens informatique : Stata dispose de &laquo;&nbsp;macros&nbsp;&raquo; pour tout ce qui relève de la programmation, et ceci fait l&rsquo;objet d&rsquo;un autre chapitre.
</p>

<div id="outline-container-orgd56b207" class="outline-2">
<h2 id="orgd56b207">Gestion d&rsquo;un tableau de données</h2>
<div class="outline-text-2" id="text-orgd56b207">
</div>
<div id="outline-container-orgc8bb919" class="outline-3">
<h3 id="orgc8bb919">Le format DTA</h3>
<div class="outline-text-3" id="text-orgc8bb919">
<p>
On a déjà vu un exemple de format natif Stata avec les données <a href="https://www.stata.com/help.cgi?auto" class="stata">auto</a> utilisées dans le <a href="./00-intro.html">chapitre précédent</a> pour illustrer les principes de base de Stata : il s&rsquo;agit des fichiers <code>DTA</code>. La spécification de ce type de fichier peut être consultée dans le manuel en ligne pour le mot clé <a href="https://www.stata.com/help.cgi?dta" class="stata">dta</a>. Il s&rsquo;agit d&rsquo;un format binaire qui a quelque peu évolué entre les versions 12, 13 et 14 de Stata. Si <a href="https://stattransfer.com">Stat/Transfer</a> permet de passer d&rsquo;un format à l&rsquo;autre sans problème, le package <code>foreign</code> de R (<code>read.dta</code>) ne permet de lire que les fichiers Stata 12 ou inférieurs et il est préférable d&rsquo;utiliser le package <a href="http://haven.tidyverse.org">haven</a> (<code>read_dta</code>) pour les versions 13 et plus. Cette librairie repose sur la librairie <a href="https://github.com/WizardMac/ReadStat">ReadStat</a>, également utilisable en ligne de commande. Attention, dans ce cas, moins d&rsquo;options sont disponibles (à la date de rédaction de ce chapitre), en particulier en ce qui concerne la gestion des dates et des formats de variable. Une autre solution consiste à utiliser le package <a href="https://cran.r-project.org/web/packages/readstata13/">readstata13</a>. Pour les utilisateurs de Python, le package <a href="https://pandas.pydata.org">Pandas</a> inclut un utilitaire pour la lecture de fichiers Stata (<code>from pandas.io.stata import StataReader</code>).
</p>

<p>
Les changements notables entre les formats DTA 12 (juillet 2011), 13 (juin 2013, <code>help dta_117</code>) et 14 (avril 2015, <code>help dta</code> ou <code>help dta_119</code> car il s&rsquo;agit de la même version que pour Stata 15) portent sur l&rsquo;utilisation de chaînes de caratères longues, la gestion des facteurs et l&rsquo;encodage UTF-8 des chaînes de caractères (incluant les noms de variable). Les versions DTA pour Stata 14 et 15 sont identiques, sauf dans le cas de Stata 15/MP qui autorise plus de 32767 variables et possède une structure légèrement différente. En pratique, c&rsquo;est le support des caratères accentués pour les utilisateurs concernés qui est vraiment appréciable dans la version 15.
</p>

<p>
Les différentes méthodes permettant de lire des fichiers antérieurs ou postérieurs à la version utilisée de Stata sont décrit dans l&rsquo;article <a href="https://www.stata.com/support/faqs/data-management/save-for-previous-version/">Reading a Stata dataset with an older version of Stata</a>.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> Si l&rsquo;on souhaite connaître la version dans laquelle a été sauvé un fichier DTA sans avoir à lire l&rsquo;en-tête du fichier binaire lui-même, il suffit d&rsquo;utiliser la commande <a href="https://www.stata.com/help.cgi?dtaversion" class="stata">dtaversion</a> (à partir de Stata 13). Quant à la commande <a href="https://www.stata.com/help.cgi?saveold" class="stata">saveold</a>, elle permet de sauvegarder un tableau de données au format Stata 13 ou au format Stata 12 (avec l&rsquo;option <code>version(12)</code>). Notons que dans le cas où un fichier a été enregistré avec des caractères accentués depuis Stata 15 vers Stata 13, grâce à <a href="https://www.stata.com/help.cgi?saveold" class="stata">saveold</a>, traiter ce fichier depuis Stata 13 résultera en une perte du codage Unicode dans l&rsquo;interface graphique, mais celui-ci reste toutefois géré à peu près correctement dans un terminal.
</p>

<p>
Les nouvelles versions majeures de Stata sont publiées à peu près <a href="https://www.stata.com/support/faqs/resources/history-of-stata/">tous les deux ans</a>. Pour un historique du développement de Stata, voir l&rsquo;article de Nick Cox paru dans le Stata Journal [<a href="#cox-2005-stata">2</a>].
</p>
</div>
</div>

<div id="outline-container-org56ce8c6" class="outline-3">
<h3 id="org56ce8c6">Propriétés d&rsquo;un tableau Stata</h3>
<div class="outline-text-3" id="text-org56ce8c6">
<p>
Les données d&rsquo;illustration sont tirées de [<a href="#kohler-2012-data-analy">3</a>] et sont disponibles sur le <a href="https://www.stata-press.com/books/data-analysis-using-stata/">site de Stata Press</a>. Il est possible de télécharger les données directement depuis le site de Stata à l&rsquo;aide d&rsquo;une commande telle que <code>net from http://www.stata-press.com/data/kk3/</code>, suivie de <code>net install data</code>, ou alors d&rsquo;utiliser le fichier <code>gsoep09.dta</code> disponible dans le répertoire <code>data/</code> de ce projet. Le fichier DTA situé dans le répertoire <code>data/</code> correspond au fichier <code>data1.dta</code> dans l&rsquo;archive ZIP ou sur le site Stata.
</p>

<p>
Voici les instructions permettant de charger les données en mémoire, en supposant que le répertoire de travail contienne bien un répertoire <code>data/</code> dans lequel se trouve le fichier <code>gsoep09.dta</code> :
</p>

<div class="org-src-container">
<pre class="src src-stata">clear all
use data/gsoep09
describe, short
</pre>
</div>

<pre class="example">
set more off
clear all
use data/gsoep09
(SOEP 2009 (Kohler/Kreuter))
describe, short

Contains data from data/gsoep09.dta
  obs:         5,411                          SOEP 2009 (Kohler/Kreuter)
 vars:            65                          13 Feb 2012 17:08
 size:       568,155                          
Sorted by:  persnr
</pre>

<p>
La commande <a href="https://www.stata.com/help.cgi?describe" class="stata">describe</a> permet de décrire le tableau de données. Parmi ses différentes options, <code>short</code> permet de limiter la description à l&rsquo;en-tête du tableau, c&rsquo;est-à-dire les informations relatives au nombre d&rsquo;observations et de variables et aux éventuelles annotations du tableau, tandis que <code>simple</code> permet de n&rsquo;afficher que la liste des variables.
</p>

<div class="org-src-container">
<pre class="src src-stata">describe, simple
</pre>
</div>

<pre class="example">
describe, simple
persnr       income       rooms        eqplif       pic          wor10
hhnr2009     hhinc        renttype     eqpnrj       lsat         wor11
state        hhsize       rent         hhtyp        wor01        wor12
ybirth       hhsize0to14  reval        area1        wor02        sample
sex          rel2head     eqphea       area2        wor03        intnr
mar          ymove        eqpter       dvisits      wor04        hhnr
edu          ybuild       eqpbas       heval        wor05        strata
yedu         condit       eqpgar       hsat         wor06        psu
voc          dsat         eqpalm       polint       wor07        dweight
emp          size         eqpsol       pia          wor08        xweights
egp          seval        eqpair       pib          wor09
</pre>

<p>
Notons qu&rsquo;il s&rsquo;agit de données d&rsquo;enquête, même si nous n&rsquo;exploiterons pas vraiment les poids de sondage dans les illustrations de ce chapitre. Les dernières variables du tableau sont spécifiques à Stata et permettent d&rsquo;identifier les unités de sondage (<code>strata</code> et <code>psu</code>) et les poids analytiques (<code>dweight</code> et <code>xweights</code>). 
</p>

<p>
Pour obtenir un aperçu des premières lignes du tableau, et en restreignant la liste des variables affichées, voici comment l&rsquo;on procéderait avec <a href="https://www.stata.com/help.cgi?list" class="stata">list</a> :
</p>

<div class="org-src-container">
<pre class="src src-stata">list persnr-sex in 1/5
</pre>
</div>

<pre class="example">
list persnr-sex in 1/5

     +-------------------------------------------------------+
     | persnr   hhnr2009             state   ybirth      sex |
     |-------------------------------------------------------|
  1. |   8501         85   N-Rhein-Westfa.     1932     Male |
  2. |   8502         85   N-Rhein-Westfa.     1939   Female |
  3. |  15001        150   N-Rhein-Westfa.     1946     Male |
  4. |  15002        150   N-Rhein-Westfa.     1953   Female |
  5. |  18201     111373    Mecklenburg-V.     1969     Male |
     +-------------------------------------------------------+
</pre>

<p>
On reviendra en détail sur les listes de variables et le qualifieur <a href="https://www.stata.com/help.cgi?if" class="stata">if</a> dans les sections suivantes. En attendant, il suffit de savoir que l&rsquo;on peut indiquer une étendue de variables en indiquant le nom de la première variable séparé du nom de la dernière variable par un tiret et que l&rsquo;instruction <code>in 1/5</code> permet de ne lister que les observations allant de la ligne 1 à 5. Les lignes correspondent à des unités statistiques mais une des particularités de Stata est l&rsquo;usage extensif de procédures de tri du tableau de données, par exemple pour calculer des statistiques agrégées par groupes d&rsquo;unités statistiques, de sorte qu&rsquo;il n&rsquo;est pas recommendé de raisonner selon l&rsquo;hypothèse qu&rsquo;un numéro de ligne désigne une seule et même unité statistique (immutabilité).
</p>
</div>
</div>

<div id="outline-container-orgb82e975" class="outline-3">
<h3 id="orgb82e975">Autres sources de données</h3>
<div class="outline-text-3" id="text-orgb82e975">
<p>
En dehors des tableaux de données au format Stata, il est possible d&rsquo;importer des sources de données de différents types. Outre les fichiers transport de SAS ou des bases de données relationnelles pour lequelles on dispose d&rsquo;ODBC, Stata gère de manière assez simple les fichiers texte et Excel. Le cas échéant, le logiciel <a href="http://www.stattransfer.com">Stat/Transfer</a> permet de passer de pratiquement n&rsquo;importe quel format d&rsquo;origine à un foramt Stata 13 (ou 15 avec la dernière version de Stat/Transfer).
</p>

<p>
Par défaut, Stata cherche les fichiers dans le répertoire de travail courant. On peut le changer avec la commande <a href="https://www.stata.com/help.cgi?cd" class="stata">cd</a> ou avec le navigateur de répertoire situé dans la barre d’état.  
</p>

<p>
Considérons le fichier CSV, <code>birthwt.csv</code>, dont les premières lignes sont affichées ci-dessous :
</p>

<pre class="example">
low,age,lwt,race,smoke,ptl,ht,ui,ftv,bwt 
0,19,182,2,0,0,0,1,0,2523 
0,33,155,3,0,0,0,0,3,2551 
0,20,105,1,1,0,0,0,1,2557 
0,21,108,1,1,0,0,1,2,2594 
0,18,107,1,1,0,0,1,0,2600
</pre>

<p>
La commande <a href="https://www.stata.com/help.cgi?import delimited" class="stata">import delimited</a> de Stata 13 permet d&rsquo;importer l&rsquo;ensemble des données une fois que l&rsquo;on a précisé le type de délimiteur de champs (ici, des virgules) et signalé la présence d&rsquo;une ligne d&rsquo;en-tête regroupant le nom des variables : <code>import delimited "birthwt.csv", clear delimiter(comma) varnames(1)</code>. Les guillemets autour du nom du fichier sont, comme dans les cas des fichiers au format Stata, facultatifs si le nom du fichier ne contient pas d&rsquo;espaces. L&rsquo;extension est obligatoire en revanche.
</p>

<p>
Voici un autre cas de figure, <code>birthwt.dat</code>, dans lequel les données sont séparées par des espaces ou des taquets de tabulation, le fichier ne contenant pas de ligne d&rsquo;en-tête :
</p>

<pre class="example">
0 19 182 2 0 0 0 1 0 2523 
0 33 155 3 0 0 0 0 3 2551 
0 20 105 1 1 0 0 0 1 2557 
0 21 108 1 1 0 0 1 2 2594 
0 18 107 1 1 0 0 1 0 2600
</pre>

<p>
La commande <a href="https://www.stata.com/help.cgi?infile" class="stata">infile</a> permet de gérer ce type de fichier, sachant que dans ce cas il est nécessaire de préciser le nom des variables : <code>infile low age lwt race smoke ptl ht ui ftv bwt using "birthwt.dat", clear</code>. Notons que Stata préfère généralement les extensions de type <code>raw</code> (utilisé par défaut par la commande <a href="https://www.stata.com/help.cgi?write" class="stata">write</a>) ou <code>txt</code>. La même commande <a href="https://www.stata.com/help.cgi?infile" class="stata">infile</a> permet également d&rsquo;importer des données brutes accompagnées d&rsquo;un dictionnaire de données (&laquo;&nbsp;codebook&nbsp;&raquo;). Voici un exemple de dictionnaire de données pour l&rsquo;exemple précédent :
</p>

<pre class="example">
dictionary {
_first (1)
byte low "birthweight &lt;2500g"
byte age "age of mother"
int lwt "weight at last menstrual period"
byte race "race"
byte smoke "smoked during pregnancy"
byte ptl "premature labor history (count)"
byte ht "has history of hypertension"
byte ui "presence , uterine irritability"
byte ftv "number of visits to physician during 1st trimester" int bwt "birthweight (grams)"
}
</pre>

<p>
L&rsquo;importation se réalise alors à l&rsquo;aide de l&rsquo;instruction <code>infile using "birthwt.dct", using(birthwt.dat) clear</code>. Encore une fois, les guillemets sont facultatifs si le nom de fichier est sans ambiguïté.
</p>

<p>
Une autre commande, <a href="https://www.stata.com/help.cgi?infix" class="stata">infix</a>, moins souple que <a href="https://www.stata.com/help.cgi?infile" class="stata">infile</a>, permet de gérer le cas des dictionnaires de données et des données en format fixe, tel qu&rsquo;on peut encore le trouver dans les fichiers de données des années 80-90. Un exemple est disponible dans le fichier <code>data/lowbwt.dat</code>. Le fichier dictionnaire <code>birthwt.dct</code> contient cette fois-ci les instructions de formatage et de nommage des variables, ainsi que le nom du fichier de données lui-même :
</p>

<pre class="example">
infix dictionary using lowbwt.dat {
8 first
1 lines
int id 2-4
byte low 9-10
byte age 16-18
int lwt 22-25
byte race 31-32
byte smoke 39-40
byte ptl 47-48
byte ht 54-55
byte ui 60-61
byte ftv 66-67
int bwt 72-76
}
</pre>

<p>
L&rsquo;importation se réalise dans ce cas à l&rsquo;aide de l&rsquo;instruction <code>infix using lowbwt.dct, clear</code>.
</p>
</div>
</div>

<div id="outline-container-org02c4e5f" class="outline-3">
<h3 id="org02c4e5f">Type de variables</h3>
<div class="outline-text-3" id="text-org02c4e5f">
<p>
On distinguera essentiellement les nombres et les caractères, et par extension les chaînes de caractères. Les variables catégorielles sont représentées sont valeurs discrètes auxquelles on associe le plus souvent des étiquettes textuelles, encore appelée &laquo;&nbsp;label&nbsp;&raquo;.
</p>

<p>
Le mode de stockage des variables numériques, qui s&rsquo;apparente à la précision de la variable numérique dans sa représentation machine, peut être de 5 types, par degré croissant de précision : <code>byte</code>, <code>int</code>, <code>long</code>, <code>double</code> et <code>float</code>. Les deux derniers types représentent des nombres réels (4 et 8-bytes IEEE float). Par exemple, les variables de type <code>byte</code> permettent de représenter des nombres allant de -127 à 100<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> tandis que le type <code>long</code> correspond à un intervalle de valeurs de \([-2 147 483 647, 2 147 483 620]\). Le type <code>byte</code> est généralement utilisé pour le codage numérique des variables catégorielles (binaires ou à plusieurs niveaux). Il est préférable d&rsquo;utiliser le type <code>long</code>, voire <code>double</code>, ou alors des chaînes de caractères (<code>string</code>) pour coder les identifiants uniques d’une base de données.
</p>

<p>
Dans le visualisateur de données (<a href="https://www.stata.com/help.cgi?browse" class="stata">browse</a>), les variables numériques apparaissent en noir, les variables catégorielles en bleu et les chaînes de caractères en rouge. Bien qu&rsquo;il soit préférable de travailler exclusivement avec la console de commandes, la possibilité de visualiser les données à l&rsquo;aide d&rsquo;un tableur intégré est un grand plus de Stata. Notons que ce tableur est également accessible en mode édition.
</p>

<p>
Voici deux exemples de variables : le revenu (<code>income</code>), variable numérique stockée sous forme d&rsquo;entiers, et le sexe (<code>sex</code>) des répondants, variable catégorielle à deux classes ou niveaux :
</p>

<div class="org-src-container">
<pre class="src src-stata">list income in 1/5
list sex in 1/5
</pre>
</div>

<pre class="example">
list income in 1/5

     +--------+
     | income |
     |--------|
  1. |      . |
  2. |      . |
  3. |      0 |
  4. |  19955 |
  5. |  35498 |
     +--------+
list sex in 1/5

     +--------+
     |    sex |
     |--------|
  1. |   Male |
  2. | Female |
  3. |   Male |
  4. | Female |
  5. |   Male |
     +--------+
</pre>

<p>
Les commandes <a href="https://www.stata.com/help.cgi?summarize" class="stata">summarize</a> et <a href="https://www.stata.com/help.cgi?tabulate" class="stata">tabulate</a> permettent respectivement de construire des résumés numériques appropriés pour ces deux types de variable :
</p>

<div class="org-src-container">
<pre class="src src-stata">summarize income
</pre>
</div>

<pre class="example">
summarize income

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      income |      4779     20540.6    37422.49          0     897756
</pre>


<div class="org-src-container">
<pre class="src src-stata">tabulate sex
</pre>
</div>

<pre class="example">
tabulate sex

              Gender |      Freq.     Percent        Cum.
---------------------+-----------------------------------
                Male |      2,585       47.77       47.77
              Female |      2,826       52.23      100.00
---------------------+-----------------------------------
               Total |      5,411      100.00
</pre>


<p>
L&rsquo;option <code>nolabel</code> de <a href="https://www.stata.com/help.cgi?tabulate" class="stata">tabulate</a> permet d&rsquo;afficher les codes numériques au lieu des étiquettes associées à chacun des niveaux de la variable catégorielle.
</p>

<div class="org-src-container">
<pre class="src src-stata">tabulate sex, nolabel
</pre>
</div>

<pre class="example">
tabulate sex, nolabel

     Gender |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      2,585       47.77       47.77
          2 |      2,826       52.23      100.00
------------+-----------------------------------
      Total |      5,411      100.00
</pre>


<p>
Il est possible d&rsquo;obtenir la même information en utilisant <a href="https://www.stata.com/help.cgi?codebook" class="stata">codebook</a>, l&rsquo;avantage de cette dernière commande étant qu&rsquo;elle fonctionne avec une variable ou une liste de variables (voire le tableau en entier si l&rsquo;on ne spécifie aucune variable) et qu&rsquo;elle affiche beaucoup plus d&rsquo;informations sur le mode de représentation et le contenu de la variable :
</p>

<div class="org-src-container">
<pre class="src src-stata">codebook sex
</pre>
</div>

<pre class="example">
codebook sex

-------------------------------------------------------------------------------
sex                                                                      Gender
-------------------------------------------------------------------------------

                  type:  numeric (byte)
                 label:  sex

                 range:  [1,2]                        units:  1
         unique values:  2                        missing .:  0/5411

            tabulation:  Freq.   Numeric  Label
                          2585         1  Male
                          2826         2  Female
</pre>
</div>
</div>

<div id="outline-container-orga979104" class="outline-3">
<h3 id="orga979104">Variables et liste de variables</h3>
<div class="outline-text-3" id="text-orga979104">
<p>
Un concept clé dans Stata est la possibilité de travailler avec une seule variable, comme on l&rsquo;a vu dans l&rsquo;expression <code>codebook sex</code>, ou avec plusieurs variables. Dans ce dernier cas, on parle de &laquo;&nbsp;varlist&nbsp;&raquo; et il est généralement utile de bien vérifier lorsque l&rsquo;on cherche de l&rsquo;aide si la commande accepte une seule, voire deux variables, ou bien une <a href="https://www.stata.com/help.cgi?varlist" class="stata">varlist</a>. 
</p>

<p>
Pour spécifier une liste de variables, il suffit d&rsquo;indiquer les noms de variables en les séparant par un espace, comme dans l&rsquo;illustration suivante :
</p>

<div class="org-src-container">
<pre class="src src-stata">list wor01 wor02 wor03 in 5
</pre>
</div>

<pre class="example">
list wor01 wor02 wor03 in 5

     +--------------------------------------------------------------+
     |              wor01                wor02                wor03 |
     |--------------------------------------------------------------|
  5. | Somewhat concerned   Somewhat concerned   Somewhat concerned |
     +--------------------------------------------------------------+
</pre>


<p>
Il est également possible d&rsquo;indiquer le nom de la première variable et le nom de la dernière variable d&rsquo;une séquence de variables consécutives. Dans ce cas, le délimietur d&rsquo;étendue est le tiret :
</p>

<div class="org-src-container">
<pre class="src src-stata">list wor01-wor03 in 5
</pre>
</div>

<pre class="example">
list wor01-wor03 in 5

     +--------------------------------------------------------------+
     |              wor01                wor02                wor03 |
     |--------------------------------------------------------------|
  5. | Somewhat concerned   Somewhat concerned   Somewhat concerned |
     +--------------------------------------------------------------+
</pre>


<p>
Les noms de variable peuvent être interpolés par Stata à l&rsquo;aide des symboles d&rsquo;expressions rationelles <code>?</code> (un seul caractère, n&rsquo;importe lequel parmi les caractères autorisés) et <code>*</code> (un ou plusieurs caractères). Voici deux exemples d&rsquo;utilisation :
</p>

<div class="org-src-container">
<pre class="src src-stata">list wor0? in 5
list wor* in 3
</pre>
</div>

<pre class="example">
list wor0? in 5

     +--------------------------------------------------------------+
  5. |              wor01 |              wor02 |              wor03 |
     | Somewhat concerned | Somewhat concerned | Somewhat concerned |
     |--------------------+--------------------+--------------------|
     |              wor04 |              wor05 |              wor06 |
     | Somewhat concerned | Somewhat concerned | Somewhat concerned |
     |--------------------------------------------------------------|
     |              wor07  |          wor08  |               wor09  |
     | Somewhat concerned  | Very concerned  |  Somewhat concerned  |
     +--------------------------------------------------------------+
list wor* in 3

     +--------------------------------------------------------------+
  3. |              wor01 |              wor02 |              wor03 |
     | Somewhat concerned | Somewhat concerned | Somewhat concerned |
     |--------------------------------------------------------------|
     |          wor04  |              wor05  |               wor06  |
     | Very concerned  | Somewhat concerned  |  Somewhat concerned  |
     |--------------------------------------------------------------|
     |              wor07  |              wor08  |           wor09  |
     | Somewhat concerned  | Somewhat concerned  |  Very concerned  |
     |---------------------+---------------------+------------------|
     |              wor10  |              wor11  |           wor12  |
     | Somewhat concerned  | Somewhat concerned  |  Does not apply  |
     +--------------------------------------------------------------+
</pre>

<p>
Enfin, on peut combiner les différentes approches comme dans l&rsquo;exemple suivant :
</p>

<div class="org-src-container">
<pre class="src src-stata">list persnr sex wor01-wor03 in 1
</pre>
</div>

<pre class="example">
list persnr sex wor01-wor03 in 1

     +----------------------------------------------------------------------+
     | persnr    sex            wor01                wor02            wor03 |
     |----------------------------------------------------------------------|
  1. |   8501   Male   Very concerned   Somewhat concerned   Very concerned |
     +----------------------------------------------------------------------+
</pre>


<p>
L&rsquo;usage de listes de variables facilite beaucoup de tâches qui pourrait apparaître fastidieuses autrement (lister explicitement une dizaine de variables) ou nécessiter de programmer une boucle (renommer un ensemble de variables). Voici par exemple comment renommer des variables en bloc à l&rsquo;aide de <a href="https://www.stata.com/help.cgi?rename" class="stata">rename</a> :
</p>

<div class="org-src-container">
<pre class="src src-stata">rename wor* q*
</pre>
</div>

<p>
La variable <code>hhnr</code> s&rsquo;apprente à <code>hhnr2009</code> puisqu&rsquo;il s&rsquo;agit d&rsquo;un identifiant unique pour les foyers résidentiels. Cette variable peut être d&rsquo;ores et déjà supprimée à l&rsquo;aide de <a href="https://www.stata.com/help.cgi?drop" class="stata">drop</a> puisqu&rsquo;elle ne sera pas exploitée :
</p>

<div class="org-src-container">
<pre class="src src-stata">drop hhnr
</pre>
</div>

<pre class="example">
drop hhnr
</pre>
</div>
</div>
</div>


<div id="outline-container-org3dd4b63" class="outline-2">
<h2 id="org3dd4b63">Manipulation de variables</h2>
<div class="outline-text-2" id="text-org3dd4b63">
</div>
<div id="outline-container-org4d3948f" class="outline-3">
<h3 id="org4d3948f">Syntaxe élémentaire des commandes Stata</h3>
<div class="outline-text-3" id="text-org4d3948f">
<p>
De manière générale, les commandes Stata sont structurées de la manière suivante :
</p>

<pre class="example">
[by varlist:] command [varlist] [=exp] [if exp] [in range] [weight] [using filename] [,options]
</pre>

<p>
Tous les éléments entre crochets sont optionnels. On distingue les options principales, situées avec la virgule, et les options secondaires situées après celle-ci. Les éléments clés sont le nom de la commande (<code>command</code>), les qualifieurs <code>if</code> et <code>in</code> permettant de sélectionner des unités statistiques (lignes du tableau) et le préfixe <code>by</code> qui autorise la répétition d&rsquo;une même instruction pour chaque valeur prise par une variable ou par le croisement des valeurs d&rsquo;une liste de variables (<a href="https://www.stata.com/help.cgi?varlist" class="stata">varlist</a>). L&rsquo;argument <code>=exp</code> est réservé au cas particulier où l&rsquo;on construit une variable à partir d&rsquo;une expression. L&rsquo;option <a href="https://www.stata.com/help.cgi?weight" class="stata">weight</a> est utilisée pour appliquer des poids d&rsquo;analyse aux observations ; il peut s&rsquo;agir de poids de fréquence (&laquo;&nbsp;fweight&nbsp;&raquo;), de poids de probabilité (&laquo;&nbsp;pweight&nbsp;&raquo;) et de poids analytiques (&laquo;&nbsp;aweight&nbsp;&raquo;). L&rsquo;argument <code>using filename</code> permet de spécifier un fichier d&rsquo;entrée ou de sortie pour certaines commandes.
</p>

<p>
Voici quelques illustrations de ces différentes options. Considérons le revenu annuel (en euros) et son résumé numérique produit avec <a href="https://www.stata.com/help.cgi?summarize" class="stata">summarize</a> :
</p>

<div class="org-src-container">
<pre class="src src-stata">summarize income
</pre>
</div>

<pre class="example">
summarize income

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      income |      4779     20540.6    37422.49          0     897756
</pre>


<p>
Le nombre total d&rsquo;observations affiché par <a href="https://www.stata.com/help.cgi?summarize" class="stata">summarize</a> diffère du nombre total de lignes présentes dans la tableau, comme on peut le vérifier avec <a href="https://www.stata.com/help.cgi?describe" class="stata">describe</a> ou avec la commande <a href="https://www.stata.com/help.cgi?count" class="stata">count</a>. Il est possible de dénombrer les valeurs manquantes avec la même commande et la fonction <a href="https://www.stata.com/help.cgi?missing" class="stata">missing</a> :
</p>

<div class="org-src-container">
<pre class="src src-stata">count
count if missing(income)
</pre>
</div>

<pre class="example">
count
 5411
count if missing(income)
  632
</pre>


<p>
La sélection des observations manquantes est réalisée avec le qualifieur <a href="https://www.stata.com/help.cgi?if" class="stata">if</a>. Il est possible de raffiner le filtre de sélection en utilisant les opérateurs logiques habituels : le symbole <code>&amp;</code> désigne la conjonction (&laquo;&nbsp;et&nbsp;&raquo; logique), <code>|</code> la disjonction (&laquo;&nbsp;ou&nbsp;&raquo;), <code>!</code> la négation. On dispose également des opérateurs de comparaison unaire <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code> et <code>&lt;=</code>. Il est également possible d&rsquo;utiliser les fonctions <a href="https://www.stata.com/help.cgi?inlist" class="stata">inlist</a> et <a href="https://www.stata.com/help.cgi?inrange" class="stata">inrange</a> que l&rsquo;on détaillera plus loin. Seules les observations vérifiant la condition logique spécifiée après le <a href="https://www.stata.com/help.cgi?if" class="stata">if</a> seront sélectionnées. Voici un exemple où l&rsquo;on dénombre les revenus non manquants parmi les femmes :
</p>

<div class="org-src-container">
<pre class="src src-stata">count if missing(income) &amp; sex == 2
</pre>
</div>

<pre class="example">
count if missing(income) &amp; sex == 2
  367
</pre>


<p>
Il est important de bien spécifier le code numérique et non l&rsquo;étiquette associée à un niveau dans le cas d&rsquo;une variable catégorielle.
</p>

<p>
Considérons à présent l&rsquo;âge des répondants, que l&rsquo;on peut reconstruire à partir de l&rsquo;année de réalisation de l&rsquo;enquête (2009) et de l&rsquo;année de naissance des individus :
</p>

<div class="org-src-container">
<pre class="src src-stata">generate age = 2009 - ybirth
order age, after(ybirth)
summarize age
</pre>
</div>

<pre class="example">
generate age = 2009 - ybirth
order age, after(ybirth)
summarize age

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      5411    49.50712    18.12642         17        100
</pre>


<p>
La commande <a href="https://www.stata.com/help.cgi?order" class="stata">order</a> permet de déplacer la position d&rsquo;une variables, ou plus généralement d&rsquo;une <a href="https://www.stata.com/help.cgi?varlist" class="stata">varlist</a>, en spécifiant en option la position relative par rapport à une variable déjà présente dans le tableau. Il est également possible d&rsquo;utiliser les options <code>first</code> ou <code>last</code> pour placer la ou les variables en première ou dernière position du tableau, respectivement.
</p>

<p>
Voici comment résumer numériquement cette variable pour les seuls individus pour lesquels l&rsquo;information concernant le revenu est connue :
</p>

<div class="org-src-container">
<pre class="src src-stata">summarize age if !missing(income)
</pre>
</div>

<pre class="example">
summarize age if !missing(income)

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      4779    48.15694    17.32985         17        100
</pre>


<p>
Enfin, il est également possible de stratifier l&rsquo;analyse selon le sexe à l&rsquo;aide du préfixe <a href="https://www.stata.com/help.cgi?by" class="stata">by</a> :
</p>

<div class="org-src-container">
<pre class="src src-stata">by sex, sort : summarize age if !missing(income)
</pre>
</div>

<pre class="example">
by sex, sort : summarize age if !missing(income)

-------------------------------------------------------------------------------
-&gt; sex = Male

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      2320     47.9431    17.17362         17        100

-------------------------------------------------------------------------------
-&gt; sex = Female

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      2459    48.35868    17.47705         17         97
</pre>

<p>
Comme on peut le constater, il est impératif de trier les données selon la variable de classification avant de calculer les statistiques de groupe. Le tri peut être réalisé à l&rsquo;aide de <a href="https://www.stata.com/help.cgi?sort" class="stata">sort</a> avant d&rsquo;appeler la commande <a href="https://www.stata.com/help.cgi?summarize" class="stata">summarize</a>, ou directement via le préfixe <a href="https://www.stata.com/help.cgi?by" class="stata">by</a> ; il s&rsquo;agit alors d&rsquo;une option à placer après la virgule. Il est également possible d&rsquo;utiliser <a href="https://www.stata.com/help.cgi?bysort" class="stata">bysort</a>, qui est strictement équivalent à <a href="https://www.stata.com/help.cgi?by" class="stata">by</a> avec l&rsquo;option <code>sort</code>.
</p>
</div>
</div>

<div id="outline-container-orgf5390a9" class="outline-3">
<h3 id="orgf5390a9">Création et mise à jour de variables</h3>
<div class="outline-text-3" id="text-orgf5390a9">
<p>
On a déjà vu un exemple de création de variable dans les illustrations précédentes avec la commande <a href="https://www.stata.com/help.cgi?generate" class="stata">generate</a>. Voici une utilisation plus avancée où l&rsquo;on construit une nouvelle variable à partir d&rsquo;une expression mathématique, le logarithme du revenu :
</p>

<div class="org-src-container">
<pre class="src src-stata">generate lincome = log(income)
</pre>
</div>

<pre class="example">
generate lincome = log(income)
(2001 missing values generated)
</pre>


<p>
L&rsquo;expression ci-dessus correspond bien à la syntaxe discutée dans la <a href="#org4d3948f">section précédente</a>, <code>command [varlist] [=exp]</code>. Le résultat de cette instruction a généré de nombreuses valeurs manquantes, ce qui s&rsquo;explique par la présence de revenus annuels valant 0, valeur pour laquelle le logarithme n&rsquo;est pas défini, en plus des valeurs manquantes d&rsquo;origine pour lesquelles le logarithme n&rsquo;est pas non plus défini. Il y a au moins deux manières de pallier à ce problème : on peut remplacer l&rsquo;expression <code>log(income)</code> par <code>log(income+1)</code> (l&rsquo;ajout d&rsquo;une unité ne devrait pas modifier foncièrement les analyses de cette variable étant donnée l&rsquo;étendue des valeurs observées et la valeur de tendance centrale) ou alors on peut traiter les valeurs nulles de <code>income</code> comme des valeurs manquantes. Dans le second cas de figure, pour être à même de distinguer les valeurs manquantes d&rsquo;origine des valeurs imputées, il convient d&rsquo;utiliser un code de valeur manquante différent. Voici comment procéder :
</p>

<div class="org-src-container">
<pre class="src src-stata">cap drop lincome
mvdecode income, mv(0=.c)
generate lincome = log(income)
</pre>
</div>

<pre class="example">
cap drop lincome
mvdecode income, mv(0=.c)
      income: 1369 missing values generated
generate lincome = log(income)
(2001 missing values generated)
</pre>


<p>
Voici un résumé des valeurs manquantes présentes dans ces deux variables :
</p>

<div class="org-src-container">
<pre class="src src-stata">misstable summarize *income
</pre>
</div>

<pre class="example">
misstable summarize *income
                                                               Obs&lt;.
                                                +------------------------------
               |                                | Unique
      Variable |     Obs=.     Obs&gt;.     Obs&lt;.  | values        Min         Max
  -------------+--------------------------------+------------------------------
        income |       632     1,369     3,410  |   &gt;500         46      897756
       lincome |     2,001               3,410  |   &gt;500   3.828641    13.70765
  -----------------------------------------------------------------------------
</pre>



<p>
On pourra vérifier que la transformation logarithmique a contribué à stabiliser quelque peu la variance et à symétriser la distribution, même si celle-ci reste loin d&rsquo;une distribution normale.
</p>

<div class="org-src-container">
<pre class="src src-stata">set scheme plotplain
label variable lincome "Annual income in euros (log)"
graph twoway histogram lincome, fraction bfcolor(dknavy) blcolor(none)
graph export "fig-01-histogram-lincome.pdf", fontface(DroidSans) replace
</pre>
</div>


<div id="orgbd349a6" class="figure">
<p><img src="./fig-01-histogram-lincome.png" alt="fig-01-histogram-lincome.png" width="640px" />
</p>
<p><span class="figure-number">Figure&nbsp;1&nbsp;: </span>Distribution du log du revenu annuel (euros)</p>
</div>
</div>
</div>

<div id="outline-container-org9acd380" class="outline-3">
<h3 id="org9acd380">Etiquette et annotation</h3>
<div class="outline-text-3" id="text-org9acd380">
<p>
Il est préférable de travailler avec des noms de variables court, en minuscules, et groupés par ordre logique dans le tableau. Cela facilite le travail de sélection de variable isolées ou de groupes de variables (<code>varlist</code>), leur insertion dans des commandes ou dans des structures de contrôle, par exemple des boucles <code>foreach</code>. Ceci dit, il est toujours plus pratique de donner un descriptif même succint de chacune des variables afin de pouvoir annoter automatiquement les axes des graphiques sur lesquels ces variables sont amenées à varier ou dans les tableaux de synthèse. C&rsquo;est d&rsquo;ailleurs une pratique assez courante dans le monde des enquêtes que d&rsquo;annoter systématiquement les différents items d&rsquo;un questionaire avec l&rsquo;intitulé de la question.
</p>

<p>
La commande <code>label</code> est une méta commande qui comporte plusieurs sous commandes. Ainsi, avec <a href="https://www.stata.com/help.cgi?label+variable" class="stata">label variable</a> il est possible de donner un intitulé bref à la variable elle-même. Prenons le cas de la variable <code>lincome</code> créée à l&rsquo;étape précédente. 
</p>

<div class="org-src-container">
<pre class="src src-stata">label variable lincome "Annual income in euros (log)"
</pre>
</div>

<pre class="example">
label variable lincome "Annual income in euros (log)"
</pre>


<p>
Une fois étiquetté, le libellé des variables apparaîtra dans les sorties de <a href="https://www.stata.com/help.cgi?describe" class="stata">describe</a>, <a href="https://www.stata.com/help.cgi?codebook" class="stata">codebook</a>, les graphiques et les tableaux :
</p>

<div class="org-src-container">
<pre class="src src-stata">codebook lincome
</pre>
</div>

<pre class="example">
codebook lincome

-------------------------------------------------------------------------------
lincome                                            Annual income in euros (log)
-------------------------------------------------------------------------------

                  type:  numeric (float)

                 range:  [3.8286414,13.707654]        units:  1.000e-07
         unique values:  3286                     missing .:  2001/5411

                  mean:   9.77026
              std. dev:   1.12441

           percentiles:        10%       25%       50%       75%       90%
                           8.25946   9.21433   10.0363   10.5168   10.8828
</pre>

<p>
Quant aux variables catégorielles, on a vu qu&rsquo;il s&rsquo;agit essentiellement de variables représentées sous forme d&rsquo;entiers consécutifs, \(\{1,2,\dots,k\}\), ou de valeurs 0/1 dans le cas des variables binaires, auxquels on associe des étiquettes. Ceci est réalisé avec les commandes <a href="https://www.stata.com/help.cgi?label+define" class="stata">label define</a> et <a href="https://www.stata.com/help.cgi?label+values" class="stata">label values</a>, comme illustré dans l&rsquo;exemple suivant :
</p>

<div class="org-src-container">
<pre class="src src-stata">generate insample = !missing(lincome)
label define insample 0 "Not analyzed (income = .)" 1 "In sample (income &gt; .)"
label values insample insample
</pre>
</div>

<pre class="example">
generate insample = !missing(lincome)
 "
label values insample insample
</pre>


<div class="org-src-container">
<pre class="src src-stata">tabulate insample
</pre>
</div>

<pre class="example">
tabulate insample

                 insample |      Freq.     Percent        Cum.
--------------------------+-----------------------------------
Not analyzed (income = .) |      2,001       36.98       36.98
   In sample (income &gt; .) |      3,410       63.02      100.00
--------------------------+-----------------------------------
                    Total |      5,411      100.00
</pre>


<p>
Notons que l&rsquo;on utilise souvent le même nom d&rsquo;étiquette que le nom de la variable lorsque ce jeu d&rsquo;étiquette de niveaux est réellement spécifique de cette variable. Le cas échéant, un même jeu d&rsquo;étiquettes peut être appliqué à une liste de variables. C&rsquo;est le cas par exemple pour les variables <code>wor*</code> :
</p>

<div class="org-src-container">
<pre class="src src-stata">label list concern3
</pre>
</div>

<pre class="example">
label list concern3
concern3:
           1 Very concerned
           2 Somewhat concerned
           3 Not concerned at all
          .a Refusal
          .b Does not apply
          .c Inconsistent
</pre>


<p>
Enfin, il est possible d&rsquo;annoter un tableau ou une variable à l&rsquo;aide de la commande <a href="https://www.stata.com/help.cgi?note" class="stata">note</a>. Un usage courant consiste à indiquer pour le tableau sa date de création et la source des données, et pour les variables les éventuelles transformations ou révisions qu&rsquo;elles ont subi.
</p>
</div>
</div>

<div id="outline-container-orga0672a8" class="outline-3">
<h3 id="orga0672a8">Changement de mode de stockage et format</h3>
<div class="outline-text-3" id="text-orga0672a8">
<p>
Si la précision automatiquement choisie par Stata n&rsquo;est pas indispensable à l&rsquo;interprétation des résultats ou si l&rsquo;on souhaite simplement appliquer automatiquement un arrondi des valeurs, la commande <a href="https://www.stata.com/help.cgi?format" class="stata">format</a> permet de modifier le format d&rsquo;affichage global d&rsquo;une ou plusieurs variables. Notons que les formats d&rsquo;affichage peuvent également s&rsquo;appliquer localement lors de l&rsquo;utilisation de certaines commandes telles que <a href="https://www.stata.com/help.cgi?summarize" class="stata">summarize</a>. Par exemple, en appliquant un format limitant l&rsquo;affichage à 2 décimales, voici ce que la commande précédente donnerait :
</p>

<div class="org-src-container">
<pre class="src src-stata">format age %5.2f
summarize age, format
</pre>
</div>

<pre class="example">
format age %5.2f
summarize age, format

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
         age |      5411       49.51       18.13      17.00     100.00
</pre>
</div>
</div>

<div id="outline-container-org86f01df" class="outline-3">
<h3 id="org86f01df">Gestion des dates</h3>
<div class="outline-text-3" id="text-org86f01df">
<p>
Stata offre deux types de représentation pour les dates : les dates simples (jour, mois, année) sont gérées avec <a href="https://www.stata.com/help.cgi?date" class="stata">date</a> tandis que les dates avec horaire (et fuseau horaire) sont gérées avec <a href="https://www.stata.com/help.cgi?datetime" class="stata">datetime</a>. Les dates peuvent être représentées sous forme de chaînes de caractère ou de nombres (nombre de jours depuis le 01/01/1960 ou de ms depuis le 01/01/1960 minuit). Cette dernière représentation facilite la manipulation numérique des dates puisque les opérations arithmétiques classiques sont permises. 
</p>

<p>
L’affichage des dates se personnalise à l’aide des formats <code>%td</code> et <code>%tc</code>. Stata dispose également des pseudo fonctions <a href="https://www.stata.com/help.cgi?td()" class="stata">td()</a> et <a href="https://www.stata.com/help.cgi?tc()" class="stata">tc()</a>. Il est toujours possible de passer d’un format de représentation à l’autre. La fonction <a href="https://www.stata.com/help.cgi?clock" class="stata">clock</a> convertit les dates + heures stockées sous forme de texte en nombres. De même, <a href="https://www.stata.com/help.cgi?date" class="stata">date</a> permet de convertir des dates simples en nombres. 
</p>

<p>
Pour la conversion de dates gérées sous d’autres logiciels statistiques (SAS, SPSS, R), voir le manuel &laquo;&nbsp;[D] datetime&nbsp;&raquo; (<code>help datetime</code>). Les dates formatées sous MS Excel sont généralement traitées correctement (en utilisant <a href="https://www.stata.com/help.cgi?import excel" class="stata">import excel</a>).
</p>
</div>
</div>

<div id="outline-container-org3618a81" class="outline-3">
<h3 id="org3618a81">Recodage de variables</h3>
<div class="outline-text-3" id="text-org3618a81">
<p>
Par recodage, on entend la discrétisation d&rsquo;une variable numérique en variable catégorielle à plusieurs classes ou niveaux, ainsi que la transformation d&rsquo;une variable catégorielle (création ou agrégation de niveaux).
</p>

<div class="org-src-container">
<pre class="src src-stata">xtile age4 = age, nq(4)
tabulate age4
</pre>
</div>

<pre class="example">
xtile age4 = age, nq(4)
tabulate age4

4 quantiles |
     of age |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      1,410       26.06       26.06
          2 |      1,395       25.78       51.84
          3 |      1,255       23.19       75.03
          4 |      1,351       24.97      100.00
------------+-----------------------------------
      Total |      5,411      100.00
</pre>


<p>
La variable <code>egp</code> représente la classe socio-économique (selon la nomenclature allemande) des répondants et elle est composée de 9 classes, en omettant les valeurs traitées comme manquantes (étiquettées &laquo;&nbsp;Refusal&nbsp;&raquo; et &laquo;&nbsp;Does not apply&nbsp;&raquo;). On peut construire très facilement le tableau d&rsquo;effectifs associés à l&rsquo;aide de <a href="https://www.stata.com/help.cgi?tabulate" class="stata">tabulate</a>, l&rsquo;option <code>missing</code> permettant de dénombrer les valeurs manquantes :
</p>

<div class="org-src-container">
<pre class="src src-stata">tabulate egp, missing
</pre>
</div>

<pre class="example">
tabulate egp, missing

                Social Class (EGP) |      Freq.     Percent        Cum.
-----------------------------------+-----------------------------------
                   Service class 1 |        354        6.54        6.54
                   Service class 2 |        739       13.66       20.20
        Higher routine non-manuals |        296        5.47       25.67
         Lower routine non-manuals |        373        6.89       32.56
                     Self-Employed |        213        3.94       36.50
            Skilled manual workers |        486        8.98       45.48
Semi- and unskilled manual workers |        627       11.59       57.07
                        unemployed |        312        5.77       62.83
                           Retired |      1,389       25.67       88.50
                           Refusal |         24        0.44       88.95
                    Does not apply |        598       11.05      100.00
-----------------------------------+-----------------------------------
                             Total |      5,411      100.00
</pre>


<p>
Supposons que l&rsquo;on souhaite recoder cette variable en 3 classes, en ignorant les classes &laquo;&nbsp;unemployed&nbsp;&raquo; et &laquo;&nbsp;Retired&nbsp;&raquo;, ainsi que les valeurs manquantes. Pour cela, on utilisera la commande <a href="https://www.stata.com/help.cgi?recode" class="stata">recode</a> en indiquant le schéma d&rsquo;aggrégation des classes dans une liste de clauses et le nom de la nouvelle variable à générer puisque le cas échéant <a href="https://www.stata.com/help.cgi?recode" class="stata">recode</a> agit comme une commande <a href="https://www.stata.com/help.cgi?replace" class="stata">replace</a>. Voici un exemple d&rsquo;utilisation :
</p>

<div class="org-src-container">
<pre class="src src-stata">recode egp (1/2=1) (3/5=2) (8/9=3) (15/18=.), gen(egp3)
label define egp3 1 "Service class 1/2" 2 "Non-manuals" 3 "Manuals"
label values egp3 egp3
tabulate egp3
</pre>
</div>

<pre class="example">
recode egp (1/2=1) (3/5=2) (8/9=3) (15/18=.), gen(egp3)
(4435 differences between egp and egp3)
label define egp3 1 "Service class 1/2" 2 "Non-manuals" 3 "Manuals"
label values egp3 egp3
tabulate egp3

    RECODE of egp |
    (Social Class |
           (EGP)) |      Freq.     Percent        Cum.
------------------+-----------------------------------
Service class 1/2 |      1,093       35.40       35.40
      Non-manuals |        882       28.56       63.96
          Manuals |      1,113       36.04      100.00
------------------+-----------------------------------
            Total |      3,088      100.00
</pre>
</div>
</div>
</div>


<div id="outline-container-org2bafa6d" class="outline-2">
<h2 id="org2bafa6d">Transformation d&rsquo;un tableau</h2>
<div class="outline-text-2" id="text-org2bafa6d">
</div>
<div id="outline-container-orgaf2adfa" class="outline-3">
<h3 id="orgaf2adfa">Sélection d&rsquo;observations et tri</h3>
<div class="outline-text-3" id="text-orgaf2adfa">
<p>
On a vu que la commande <a href="https://www.stata.com/help.cgi?drop" class="stata">drop</a> permet de supprimer une ou plusieurs variables dans un tableau de données. En réalité cette commande fonctionne également pour filtrer des observations, de même que <a href="https://www.stata.com/help.cgi?keep" class="stata">keep</a> qui permet, au contraire, de conserver des variables ou des observations. Dans l&rsquo;enquête socio-économique, supposons que l&rsquo;on souhaite ne conserver pour les analyses que les personnes majeures (<code>age &gt; 17</code>), il suffirait d&rsquo;utiliser l&rsquo;une de ces deux commandes. Par exemple :
</p>

<div class="org-src-container">
<pre class="src src-stata">keep if age &gt; 17 &amp; !missing(age)
count
</pre>
</div>

<pre class="example">
keep if age &gt; 17 &amp; !missing(age)
(66 observations deleted)
count
 5345
</pre>


<p>
Les procédures de tri, comme on l&rsquo;a déjà dit, sont essentielles pour travailler efficacement avec Stata. Stata dispose de deux commandes pour réaliser des tri croissants (<code>sort</code>) ou dans les deux directions (<code>gsort</code>), bien que dans la commande générique reste la commande <a href="https://www.stata.com/help.cgi?sort" class="stata">sort</a>. Celle-ci agit également comme option dans le cas du préfixe <a href="https://www.stata.com/help.cgi?by" class="stata">by</a>. Si un tableau est trié sur une ou plusieurs variables, la commande <a href="https://www.stata.com/help.cgi?describe" class="stata">describe</a> l&rsquo;indique à la suite de la liste des variables. Dasn le cas de l&rsquo;enquête socio-économique, les données sont triées selon la variable <code>persnr</code>.
</p>

<p>
Voici un exemple plus élaboré, tiré directement de l&rsquo;ouvrage de Kohler &amp; Kreuter [<a href="#kohler-2012-data-analy">3</a>] :
</p>

<div class="org-src-container">
<pre class="src src-stata">by hhnr2009 (rel2head), sort: generate agediff = ybirth - ybirth[_n-1] if rel2head == 2
</pre>
</div>

<p>
Cette instruction permet de calculer la différence d&rsquo;âge entre le père de famille (<code>head</code>) et sa partenaire (<code>partner</code>) dans chacun des foyers. La subtilité vient du tri primaire sur la variable <code>hhnr2009</code> (foyer) puis du tri secondaire sur la variable <code>rel2head</code> (situation familiale des répondants) sans que ce dernier ne soit utilisé pour grouper les opérations sous le préfixe <a href="https://www.stata.com/help.cgi?by" class="stata">by</a>. La condition <code>if rel2head==2</code> permet de s&rsquo;assurer que l&rsquo;on effectue bien le calcule dans le cas où il existe au moins deux personnes dans le foyer.
</p>

<div class="org-src-container">
<pre class="src src-stata">tabulate rel2head if rel2head &lt; 3
summarize agediff
</pre>
</div>

<pre class="example">
tabulate rel2head if rel2head &lt; 3

  Relationship |
    to HH Head |      Freq.     Percent        Cum.
---------------+-----------------------------------
          Head |      3,045       64.50       64.50
       Partner |      1,676       35.50      100.00
---------------+-----------------------------------
         Total |      4,721      100.00
summarize agediff

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
     agediff |      1672    1.358852    5.168304        -27         33
</pre>
</div>
</div>


<div id="outline-container-org2e3226d" class="outline-3">
<h3 id="org2e3226d">Optimisation de la taille mémoire</h3>
<div class="outline-text-3" id="text-org2e3226d">
<p>
La commande <a href="https://www.stata.com/help.cgi?compress" class="stata">compress</a> permet d&rsquo;optimiser le mode de stockage des variables. Cette commande n&rsquo;altère pas le contenu de la base de données et n&rsquo;induit aucune perte de précision.
</p>

<p>
La taille d&rsquo;un tableau de données peut être approximée de la manière suivante : il s&rsquo;agit du rapport \((N\times V\times W + 4N) / 1024^2\), où \(N\) désigne le nombre d&rsquo;observations, \(V\) le nombre de variabels et \(W\) la taille moyenne des variables (entiers de 1 à 4, réels de 4 à 8).<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>
</p>

<p>
<a href="https://www.stata.com/support/faqs/data-management/approximating-dataset-size/">How big will my dataset be?</a>
</p>

<p>
Dans le cas de l&rsquo;enquête socio-économique, la taille en mémoire du tableau est d&rsquo;environ 568 Ko :
</p>

<div class="org-src-container">
<pre class="src src-stata">describe, short
</pre>
</div>

<pre class="example">
describe, short

Contains data from data/gsoep09.dta
  obs:         5,345                          SOEP 2009 (Kohler/Kreuter)
 vars:            70                          13 Feb 2012 17:08
 size:       636,055                          
Sorted by:  hhnr2009  rel2head
     Note:  dataset has changed since last saved
</pre>



<p>
On ne gagnera rien à compresser ce tableau dans la mesure où il est déjà optimisé mais cela vaut souvent la peine de vérifier si le gain de taille est substantiel ou non avant de sauvegarder la version finale d&rsquo;une base de données.
</p>
</div>
</div>

<div id="outline-container-org9af1c37" class="outline-3">
<h3 id="org9af1c37">Agrégation</h3>
<div class="outline-text-3" id="text-org9af1c37">
<p>
Par agrégation on entend le procédé qui consiste à réduire un ensemble d&rsquo;observations à une valeur unique, typiquement un indicateur de tendance centrale ou l&rsquo;effectif total, selon différentes variables de classification. Par exemple, dans cette enquête socio-économique, on pourrait vouloir calculer le revenu médian par &laquo;&nbsp;lander&nbsp;&raquo; (<code>state</code>) selon le sexe et la classe d&rsquo;âge. Voici une manière de procéder avec la commande <a href="https://www.stata.com/help.cgi?collapse" class="stata">collapse</a> :
</p>

<div class="org-src-container">
<pre class="src src-stata">preserve
collapse (p50) income, by(sex age4)
list
</pre>
</div>

<pre class="example">
preserve
collapse (p50) income, by(sex age4)
list

     +-------------------------+
     |    sex   age4    income |
     |-------------------------|
  1. |   Male      1     17996 |
  2. |   Male      2     36742 |
  3. |   Male      3     37189 |
  4. |   Male      4     15979 |
  5. | Female      1     12434 |
     |-------------------------|
  6. | Female      2     18488 |
  7. | Female      3   17909.5 |
  8. | Female      4    4769.5 |
     +-------------------------+
</pre>


<p>
Pour revenir au tableau d&rsquo;origine, on utilisera <a href="https://www.stata.com/help.cgi?restore" class="stata">restore</a> :
</p>

<div class="org-src-container">
<pre class="src src-stata">restore
list sex age4 income in 1/5
</pre>
</div>

<pre class="example">
restore
list sex age4 income in 1/5

     +------------------------+
     |    sex   age4   income |
     |------------------------|
  1. |   Male      4        . |
  2. | Female      4        . |
  3. |   Male      3       .c |
  4. | Female      3    19955 |
  5. | Female      3        . |
     +------------------------+
</pre>


<p>
La commande <a href="https://www.stata.com/help.cgi?contract" class="stata">contract</a> permet de construire un tableau de données agrégées selon le même procédé mais en travaillant avec des effectifs ou des fréquences.
</p>
</div>
</div>

<div id="outline-container-org917b6ac" class="outline-3">
<h3 id="org917b6ac">Fusion de sources de données</h3>
<div class="outline-text-3" id="text-org917b6ac">
<p>
merge
</p>

<p>
append
</p>
</div>
</div>

<div id="outline-container-orgc94a65c" class="outline-3">
<h3 id="orgc94a65c">Mode de représentation rectangulaire</h3>
<div class="outline-text-3" id="text-orgc94a65c">
<p>
fillin
</p>

<p>
reshape
</p>
</div>
</div>
</div>


<div id="outline-container-orgbb59c07" class="outline-2">
<h2 id="orgbb59c07">Tableaux de description avancés</h2>
<div class="outline-text-2" id="text-orgbb59c07">
</div>
<div id="outline-container-org1540d41" class="outline-3">
<h3 id="org1540d41">Les commandes tabulate et summarize</h3>
<div class="outline-text-3" id="text-org1540d41">
<p>
Comme discuté précédemment, le préfixe <a href="https://www.stata.com/help.cgi?by" class="stata">by</a> permet de répéter une même opération selon les valeurs prises par une ou plusieurs variables, de sorte que l&rsquo;instruction suivante permet de construire très rapidement des résumés descriptifs : (c&rsquo;est même en réalité la manière la plus rapide de calculer des statistiques simples)
</p>

<div class="org-src-container">
<pre class="src src-stata">bysort sex: summarize income
</pre>
</div>

<pre class="example">
bysort sex: summarize income

-------------------------------------------------------------------------------
-&gt; sex = Male

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      income |      1746     37458.5    51939.73         46     897756

-------------------------------------------------------------------------------
-&gt; sex = Female

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
      income |      1664    19688.09    23330.87        163     612757
</pre>


<div class="org-src-container">
<pre class="src src-stata">graph twoway histogram lincome, by(sex) bfcolor(dknavy) blcolor(none)
graph export "fig-01-histogram-lincome-sex.pdf", fontface(DroidSans) replace
</pre>
</div>


<div id="org46fd57c" class="figure">
<p><img src="./fig-01-histogram-lincome-sex.png" alt="fig-01-histogram-lincome-sex.png" width="640px" />
</p>
<p><span class="figure-number">Figure&nbsp;2&nbsp;: </span>Distribution du log du revenu annuel (euros) selon le sexe et la classe socio-économique</p>
</div>


<p>
Cependant, le format de sortie ne se prête pas vraiment à une mise en forme avancée dans un rapport. On préférera donc pour l&rsquo;exportation utiliser <a href="https://www.stata.com/help.cgi?tabulate" class="stata">tabulate</a> avec l&rsquo;option <code>summarize</code> :
</p>

<div class="org-src-container">
<pre class="src src-stata">tabulate egp3, summarize(income)
</pre>
</div>

<pre class="example">
tabulate egp3, summarize(income)

  RECODE of |
egp (Social |     Summary of Individual Labor
      Class |              Earnings
     (EGP)) |        Mean   Std. Dev.       Freq.
------------+------------------------------------
  Service c |   43173.777   59488.269        1085
  Non-manua |   26257.868   29320.051         868
    Manuals |   21393.534   14701.953        1102
------------+------------------------------------
      Total |   30510.983   40867.757        3055
</pre>

<p>
Un diagramme en points [<a href="#cleveland-1985-elemen-graph-data">1</a>], qui reste préférable à un diagramme en barres, pour le même indicateur de tendance centrale que ci-dessus peut être construit à l&rsquo;aide de ces instructions :<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>
</p>

<div class="org-src-container">
<pre class="src src-stata">graph dot lincome, over(sex) over(egp3) ylabel(0(2)12) marker(1, ms(O)) ytitle("Log income")
graph export "fig-01-bar-lincome-sex.pdf", fontface(DroidSans) replace
</pre>
</div>


<div id="org30bd259" class="figure">
<p><img src="./fig-01-bar-lincome-sex.png" alt="fig-01-bar-lincome-sex.png" width="640px" />
</p>
<p><span class="figure-number">Figure&nbsp;3&nbsp;: </span>Distribution du log du revenu annuel (euros) selon le sexe et la classe socio-économique</p>
</div>
</div>
</div>

<div id="outline-container-orgcd05b19" class="outline-3">
<h3 id="orgcd05b19">La commande tabstat</h3>
<div class="outline-text-3" id="text-orgcd05b19">
<p>
La commande <a href="https://www.stata.com/help.cgi?tabstat" class="stata">tabstat</a> permet au contraire de spécifier la liste des statistiques d&rsquo;intérêt via l&rsquo;option <code>stats</code>. La variable de stratification est indiquée dans l&rsquo;option <code>by</code> (il ne peut y en avoir qu&rsquo;une seule). Pour reproduire le résumé en 5 points de Tukey disponible sous R, on peut formuler la commande de la manière suivante :
</p>

<div class="org-src-container">
<pre class="src src-stata">tabstat lincome, by(sex) stats(min q max)
</pre>
</div>

<pre class="example">
tabstat lincome, by(sex) stats(min q max)

Summary for variables: lincome
     by categories of: sex (Gender)

             sex |       min       p25       p50       p75       max
-----------------+--------------------------------------------------
            Male |  3.828641  9.719625  10.34229  10.73068  13.70765
          Female |   5.09375  8.738494  9.701647  10.22274  13.32572
-----------------+--------------------------------------------------
           Total |  3.828641  9.214333  10.03631  10.51678  13.70765
--------------------------------------------------------------------
</pre>

<p>
Le symbole <code>q</code> est équivalent à utiliser <code>p25 p50 p75</code> pour reporter les trois quartiles.
</p>

<p>
En guise de représentation graphique, il existe les diagrammes en forme de boîtes à moustaches que l&rsquo;on peut conditionner sur une variable de classification comme dans l&rsquo;exemple suivant :
</p>

<div class="org-src-container">
<pre class="src src-stata">graph box lincome, over(sex)
graph export "fig-01-box-lincome-sex.pdf", fontface(DroidSans) replace
</pre>
</div>


<div id="org8fe0017" class="figure">
<p><img src="./fig-01-box-lincome-sex.png" alt="fig-01-box-lincome-sex.png" width="640px" />
</p>
<p><span class="figure-number">Figure&nbsp;4&nbsp;: </span>Distribution du log du revenu annuel (euros) selon le sexe</p>
</div>
</div>
</div>

<div id="outline-container-orgba64505" class="outline-3">
<h3 id="orgba64505">La commande table</h3>
<div class="outline-text-3" id="text-orgba64505">
<p>
La commande <a href="https://www.stata.com/help.cgi?table" class="stata">table</a> est beaucoup plus souple et elle permet non seulement de choisir les statistiques d&rsquo;intérêt mais également d&rsquo;utiliser jusqu&rsquo;à quatre variables de classification. Les statistiques d&rsquo;intérêt sont indiquées dans l&rsquo;option <code>content</code>. En l&rsquo;absence de contenu à résumer, <a href="https://www.stata.com/help.cgi?table" class="stata">table</a> se comporte comme <a href="https://www.stata.com/help.cgi?tabulate+twoway" class="stata">tabulate twoway</a>.
</p>

<div class="org-src-container">
<pre class="src src-stata">table egp3 sex, column
</pre>
</div>

<pre class="example">
table egp3 sex, column

------------------------------------------
RECODE of egp     |
(Social Class     |         Gender        
(EGP))            |   Male  Female   Total
------------------+-----------------------
Service class 1/2 |    569     524   1,093
      Non-manuals |    290     592     882
          Manuals |    717     396   1,113
               .a |      1       2       3
               .b |    163     390     553
------------------------------------------
</pre>

<p>
Attention, contrairement à <a href="https://www.stata.com/help.cgi?tabstat" class="stata">tabstat</a>, dans le cas où l&rsquo;on spécifie l&rsquo;option <code>content</code> le symbole <code>q</code> ne se substitue pas à <code>p25 p50 p75</code>. Concernant les critères de classification, on distingue les variables définissant les lignes et les colonnes, ainsi qu&rsquo;une variable &laquo;&nbsp;super-colonne&nbsp;&raquo; en troisième position, indiquées juste avant le séparateur d&rsquo;options, et une variable &laquo;&nbsp;super-ligne&nbsp;&raquo; indiquée dans une option <code>by</code>. Qui plus est, la commande <a href="https://www.stata.com/help.cgi?table" class="stata">table</a> est &laquo;&nbsp;byable&nbsp;&raquo;, ce qui signifie que l&rsquo;on peut inclure jusqu&rsquo;à cinq variables de stratification. Voici un exemple de tableau croisant les niveaux de deux variables catégorielles pour chacun desquels on calcule la médiane du revenu. Le formatage des résultats numériques, ici arrondi à l&rsquo;entier le plus proche, se fait directement via l&rsquo;option <code>format</code> :
</p>

<div class="org-src-container">
<pre class="src src-stata">table egp3 sex if !missing(egp3), content(p50 lincome) format(%5.0f)
</pre>
</div>

<pre class="example">
table egp3 sex if !missing(egp3), content(p50 lincome) format(%5.0f)

----------------------------------
RECODE of egp     |
(Social Class     |     Gender    
(EGP))            |   Male  Female
------------------+---------------
Service class 1/2 |     11      10
      Non-manuals |     10      10
          Manuals |     10       9
----------------------------------
</pre>
</div>
</div>

<div id="outline-container-org2c2cd96" class="outline-3">
<h3 id="org2c2cd96">Analyses pondérées</h3>
</div>

<div id="outline-container-orga258801" class="outline-3">
<h3 id="orga258801">Commandes additionnelles</h3>
</div>

<div id="outline-container-org9e98357" class="outline-3">
<h3 id="org9e98357">Exportation des tableaux</h3>
<div class="outline-text-3" id="text-org9e98357">
<div id="bibliography">
<h2>Références</h2>

<table>

<tr valign="top">
<td align="right" class="bibtexnumber">
[<a name="cleveland-1985-elemen-graph-data">1</a>]
</td>
<td class="bibtexitem">
W.&nbsp;S. Cleveland.
 <em>The Elements of Graphing Data</em>.
 Monterey, CA: Wadsworth, 1985.

</td>
</tr>


<tr valign="top">
<td align="right" class="bibtexnumber">
[<a name="cox-2005-stata">2</a>]
</td>
<td class="bibtexitem">
Nick Cox.
 A brief history of Stata on its 20th anniversary.
 <em>The Stata Journal</em>, 5(1):2--18, 2005.

</td>
</tr>


<tr valign="top">
<td align="right" class="bibtexnumber">
[<a name="kohler-2012-data-analy">3</a>]
</td>
<td class="bibtexitem">
Ulrich Kohler and Frauke Kreuter.
 <em>Data Analysis Using Stata</em>.
 Stata Press, 3 edition, 2012.

</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Notes de bas de page: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Il existe également d&rsquo;anciens utilitaires, comme <a href="http://radyakin.org/transfer/use13/use13.htm">use13</a>, permettant de lire des fichiers vrsion 13 sous Stata 10. 
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Le fait que le type <code>byte</code> ne s&rsquo;étende pas jusqu&rsquo;à +127 vient des codes de valeurs manquante simple (<code>.</code> = 101) et étendu (<code>.a</code> = 102 à <code>.z</code> = 127).
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
Voir <a href="https://www.stata.com/support/faqs/data-management/approximating-dataset-size/">How big will my dataset be?</a> 
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
Par défaut, l&rsquo;échelle pour ce type de graphique inclut le 0, voir le [[][chapitre sur les graphiques]].
</p></div></div>


</div>
</div></div>
</body>
</html>
